angular.module("perfect_scrollbar",[]).directive("perfectScrollbar",["$parse","$window",function($parse,$window){var psOptions=["handlers","wheelSpeed","wheelPropagation","swipeEasing","minScrollbarLength","maxScrollbarLength","scrollingThreshold","useBothWheelAxes","suppressScrollX","suppressScrollY","scrollXMarginOffset","scrollYMarginOffset"];return{restrict:"E",transclude:!0,template:"<div><div ng-transclude></div></div>",replace:!0,link:function($scope,$elem,$attr){function update(event){$scope.$evalAsync(function(){"true"==$attr.scrollDown&&"mouseenter"!=event&&setTimeout(function(){$elem[0].scrollTop=$elem.prop("scrollHeight")},100),perfect.update()})}for(var perfect,jqWindow=angular.element($window),options={},i=0,l=psOptions.length;i<l;i++){var opt=psOptions[i];void 0!==$attr[opt]&&(options[opt]=$parse($attr[opt])())}$scope.$evalAsync(function(){perfect=new PerfectScrollbar($elem[0],options);var onScrollHandler=$parse($attr.onScroll);$elem.on("scroll",function(){var scrollTop=$elem.prop("scrollTop"),scrollHeight=$elem.prop("scrollHeight")-$elem[0].clientHeight,scrollLeft=$elem.prop("scrollLeft"),scrollWidth=$elem.prop("scrollWidth")-$elem[0].clientWidth;$scope.$apply(function(){onScrollHandler($scope,{scrollTop:scrollTop,scrollHeight:scrollHeight,scrollLeft:scrollLeft,scrollWidth:scrollWidth})})})}),$scope.$watch(function(){return $elem.prop("scrollHeight")},function(newValue,oldValue){newValue&&update("contentSizeChange")}),$elem.on("mouseenter",function(){update("mouseenter")}),$attr.refreshOnChange&&$scope.$watchCollection($attr.refreshOnChange,function(){update()}),$attr.refreshOnResize&&jqWindow.on("resize",function(){update()}),$attr.updateOn&&$attr.updateOn.split(" ").forEach(function(eventName){$scope.$on(eventName,update)}),$elem.on("$destroy",function(){jqWindow.off("resize",function(){update()}),perfect.destroy(),perfect=null})}}}]);